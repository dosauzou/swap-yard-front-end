<div class="flex-shrink-0 p-3 bg-white" style="width: 280px;" (click)="isOpen = !isOpen" type="button" cdkOverlayOrigin
  #trigger="cdkOverlayOrigin">

  <a class="d-flex align-items-center pb-3 mb-3 link-dark text-decoration-none border-bottom">
    <svg class="bi me-2" width="30" height="24">
      <use xlink:href="#bootstrap" />
    </svg>
    <span class="fs-5 fw-semibold">Refine Items</span>
  </a>
</div>
<!-- This template displays the overlay content and is connected to the button -->

<ng-template cdkConnectedOverlay [cdkConnectedOverlayOpen]="isOpen" [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayPositions]="[{originX: 'start', overlayX: 'start', overlayY: 'top', originY: 'bottom'}]">
  <ul class="example-list">
    <li class="mb-1">
      <button class="btn btn-toggle align-items-center rounded collapsed" (click)="collapse.toggle()"
        [attr.aria-expanded]="!isCollapsed">
        Colour
      </button>
      <section class="example-section" [formGroup]="colour">

        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          <div class="collapse show" id="home-collapse" #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
            <li class="form-check" *ngFor=" let colour of colours">
              <p>
                <mat-checkbox (click)=filterByColour(colour) value="{{colour}" class="form-check">{{colour}}
                </mat-checkbox>
              </p>
            </li>
          </div>
        </ul>
      </section>
    </li>
    <li class="mb-1">
      <button class="btn btn-toggle align-items-center rounded collapsed" (click)="collapse2.toggle()"
        [attr.aria-expanded]="!isCollapsed2" aria-controls="collapseExample">
        Size
      </button>
      <div #collapse2="ngbCollapse" [(ngbCollapse)]="isCollapsed2">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          <li class="form-check" *ngFor=" let size of sizings">
            <p>
              <mat-checkbox (click)=filterBySize(size) value="{{size}" class="form-check">{{size}}
              </mat-checkbox>
            </p>
          </li>
        </ul>
      </div>
    </li>
    <li class="mb-1">
      <button class="btn btn-toggle align-items-center rounded collapsed" (click)="collapse1.toggle()"
        [attr.aria-expanded]="!isCollapsed1">
        Category
      </button>
      <div #collapse1="ngbCollapse" [(ngbCollapse)]="isCollapsed1">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          <li class="form-check" *ngFor=" let condition of conditions">
            <p>
              <mat-checkbox (click)=filterByCondition(condition) value="{{condition}" class="form-check">{{condition}}
              </mat-checkbox>
            </p>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</ng-template>


<body>



  <main>





    <div *ngIf="lastitem; else elseBlock">
      <div class="main-div">

        <div class="button1" (click)="onLeft()">
          <button mat-fab color="primary" aria-label="Example icon button with a delete icon">
            <mat-icon>delete</mat-icon>
          </button>
        </div>

        <!-- ng for works, url is not safe though?? -->
        <mat-card class="example-card">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image">
              <div></div>
            </div>
            <mat-card-title>{{id}}</mat-card-title>
            <!-- <mat-card-subtitle>{{this.item.size}}</mat-card-subtitle> -->
          </mat-card-header>

          <img mat-card-image [src]="arrayCopy[arrayCopy.length-1].images.data" class="card-size"
            alt="Photo of a Shiba Inu">
          <mat-card-content>
            <p>
              {{arrayCopy[arrayCopy.length-1].description}}
            </p>
          </mat-card-content>
          <mat-card-actions>
            <!-- sert likes (click)="onRight() -->
            <mat-accordion>
              <mat-expansion-panel hideToggle>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Item details
                  </mat-panel-title>
                  <mat-panel-description>
                    Click to see details
                  </mat-panel-description>
                </mat-expansion-panel-header>
                <p>Size: {{arrayCopy[arrayCopy.length-1].size}}</p>
                <p>Condition: {{arrayCopy[arrayCopy.length-1].clothingCondition}}</p>
                <p>Color: {{arrayCopy[arrayCopy.length-1].color}}</p>
                <p>Material: {{arrayCopy[arrayCopy.length-1].material}}</p>

              </mat-expansion-panel>
            </mat-accordion>

          </mat-card-actions>

        </mat-card>

        <!-- //onclick button, should store ther Swipe -->
        <div class="button">
          <button mat-fab aria-label="Example icon button with a heart icon" (click)="onRight()">
            <mat-icon>favorite</mat-icon>
          </button>
        </div>
      </div>
    </div>

    <ng-template #elseBlock>
      <div class= container style="position: relative; width: 500px">
       
      <app-spinner></app-spinner>
      <p class="lead" style="font-size: 25px; color: white; text-align: center;">Looks like thats all we've got... check back later or try adjust your preferences!</p>

    </div>

    </ng-template>


  </main>
</body>